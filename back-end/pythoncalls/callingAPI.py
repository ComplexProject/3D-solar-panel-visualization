import requests
import time

BASE_URL = "http://localhost:8503/getData"
PARAMS_TEMPLATE = {
    "azimuth": 1,
    "slope": 1,
    "year": 2023
}

coordinates = [
    (50.88998,5.84866),
    (51.28998,3.72477),
    (51.28998,4.14955),
    (51.28998,5.42388),
    (51.28998,5.84866),
    (51.56048,3.51420),
    (51.56048,3.94182),
    (51.56048,4.36944),
    (51.56048,4.79706),
    (51.56048,5.22468),
    (51.56048,5.65230),
    (51.56048,6.07992),
    (51.83097,4.14836),
    (51.83097,4.57253),
    (51.83097,4.99671),
    (51.83097,5.42089),
    (51.83097,5.84507),
    (51.83097,6.26924),
    (52.10147,4.39671),
    (52.10147,4.83540),
    (52.10147,5.27409),
    (52.10147,5.71277),
    (52.10147,6.15146),
    (52.10147,6.59015),
    (52.37196,4.56931),
    (52.37196,4.99241),
    (52.37196,5.41551),
    (52.37196,5.83861),
    (52.37196,6.26172),
    (52.37196,6.68482),
    (52.37196,7.10792),
    (52.64246,4.82804),
    (52.64246,5.26427),
    (52.64246,5.70050),
    (52.64246,6.13673),
    (52.64246,6.57297),
    (52.64246,7.00920),
    (52.91295,5.00132),
    (52.91295,5.42665),
    (52.91295,5.85198),
    (52.91295,6.27731),
    (52.91295,6.70264),
    (52.91295,7.12797),
    (53.18345,4.83544),
    (53.18345,5.27543),
    (53.18345,5.71541),
    (53.18345,6.15540),
    (53.18345,6.59538),
    (53.18345,7.03537),
    (53.45394,5.43133),
    (53.45394,5.85735),
    (53.45394,6.28336),
    (53.45394,6.70937)
]

for lat, lon in coordinates:
    params = PARAMS_TEMPLATE.copy()
    params["latit"] = lat
    params["longit"] = lon

    while True:
        try:
            response = requests.get(BASE_URL, params=params, timeout=3000)
            response.raise_for_status()
            print(f"✓ Success for ({lat}, {lon})")
            break  
        except Exception as e:
            print(f"✗ Error for ({lat}, {lon}): {e}")
            print("Retrying in 1 seconds...")
            time.sleep(1) 